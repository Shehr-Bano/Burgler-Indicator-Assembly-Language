LIST P=PIC18F452,F=INHX32,N=0,ST=OFF,R=HEX
#include<p18f452.inc>
config OSC=HS,OSCS=OFF,WDT=OFF,BORV=45,PWRT=ON,BOR=ON,DEBUG=OFF,LVP=OFF,STVR=OFF
org 0x2A
MOVLW 07
MOVWF T0CON
LCD_DATA EQU PORTD
LCD_CTRL EQU PORTB
RS EQU RB0
RW EQU RB1
EN EQU RB2
CLRF TRISD
CLRF TRISB


BCF LCD_CTRL,EN
CALL LDELAY
MOVLW 38
CALL COMNWRT
CALL LDELAY
MOVLW 0E
CALL COMNWRT
CALL DELAY
MOVLW 06
CALL COMNWRT
CALL DELAY
MOVLW 84
CALL COMNWRT
CALL DELAY
AGAIN 
MOVLW 01
CALL COMNWRT
CALL DELAY
MOVLW 02
CALL COMNWRT
CALL DELAY
ST
BTFSS PORTC,5
GOTO SCR
GOTO INS
BTG LCD_CTRL,0
BRA AGAIN

SCR 
MOVLW 01
CALL COMNWRT
CALL DELAY
MOVLW 02
CALL COMNWRT
CALL DELAY
MOVLW 0C0
CALL COMNWRT
CALL DELAY
MOVLW 14
CALL COMNWRT
CALL DELAY
MOVLW 14
CALL COMNWRT
CALL DELAY
MOVLW 14
CALL COMNWRT
CALL DELAY
MOVLW A' '
CALL DATAWRT
CALL DELAY
MOVLW A'S'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'C'
CALL DATAWRT
CALL DELAY
MOVLW A'U'
CALL DATAWRT
CALL DELAY
MOVLW A'R'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'!'
CALL DATAWRT
CALL DELAY
CALL DSPOFF
AGAIN3 BTFSS PORTC,5
BRA AGAIN3
GOTO INS
RETURN


INS 
MOVLW 01
CALL COMNWRT
CALL DELAY
MOVLW 02
CALL COMNWRT
CALL DELAY
MOVLW A' '
CALL DATAWRT
CALL DELAY
MOVLW A'A'
CALL DATAWRT
CALL DELAY
MOVLW A'L'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'R'
CALL DATAWRT
CALL DELAY
MOVLW A'T'
CALL DATAWRT
CALL DELAY
MOVLW 0C0
CALL COMNWRT
CALL DELAY
MOVLW A'S'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'C'
CALL DATAWRT
CALL DELAY
MOVLW A'U'
CALL DATAWRT
CALL DELAY
MOVLW A'R'
CALL DATAWRT
CALL DELAY
MOVLW A'I'
CALL DATAWRT
CALL DELAY
MOVLW A'T'
CALL DATAWRT
CALL DELAY
MOVLW A'Y'
CALL DATAWRT
CALL DELAY
MOVLW A' '
CALL DATAWRT
CALL DELAY
MOVLW A'B'
CALL DATAWRT
CALL DELAY
MOVLW A'R'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'A
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'C'
CALL DATAWRT
CALL DELAY
MOVLW A'H'
CALL DATAWRT
CALL DELAY
CALL DSPOFF
AGAIN2 BTFSC PORTC,5
BRA AGAIN2
GOTO SBT
RETURN

SBT
MOVLW 01
CALL COMNWRT
CALL DELAY
MOVLW 02
CALL COMNWRT
CALL DELAY
MOVLW A' '
CALL DATAWRT
CALL DELAY
MOVLW A'M'
CALL DATAWRT
CALL DELAY
MOVLW A'O'
CALL DATAWRT
CALL DELAY
MOVLW A'V'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'M'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'N'
CALL DATAWRT
CALL DELAY
MOVLW A'T'
CALL DATAWRT
CALL DELAY
MOVLW A' '
CALL DATAWRT
CALL DELAY
MOVLW A'F'
CALL DATAWRT
CALL DELAY
MOVLW A'O'
CALL DATAWRT
CALL DELAY
MOVLW A'U'
CALL DATAWRT
CALL DELAY
MOVLW A'N'
CALL DATAWRT
CALL DELAY
MOVLW A'D'
CALL DATAWRT
CALL DELAY
MOVLW 0C0
CALL COMNWRT
CALL DELAY
MOVLW A'F'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'W'
CALL DATAWRT
CALL DELAY
MOVLW A' '
CALL DATAWRT
CALL DELAY
MOVLW A'M'
CALL DATAWRT
CALL DELAY
MOVLW A'O'
CALL DATAWRT
CALL DELAY
MOVLW A'M'
CALL DATAWRT
CALL DELAY
MOVLW A'E'
CALL DATAWRT
CALL DELAY
MOVLW A'N'
CALL DATAWRT
CALL DELAY
MOVLW A'T'
CALL DATAWRT
CALL DELAY
MOVLW A'S'
CALL DATAWRT
CALL DELAY
MOVLW A' '
CALL DATAWRT
CALL DELAY
MOVLW A'A'
CALL DATAWRT
CALL DELAY
MOVLW A'G'
CALL DATAWRT
CALL DELAY
MOVLW A'O'
CALL DATAWRT
CALL DELAY
CALL TIM
BTFSC PORTC,5
GOTO INS
GOTO SCR
RETURN
COMNWRT
MOVWF LCD_DATA
BCF LCD_CTRL,RS
BCF LCD_CTRL,RW
BSF LCD_CTRL,EN
CALL SDELAY
BCF LCD_CTRL,EN
RETURN
DATAWRT
MOVWF LCD_DATA
BSF LCD_CTRL,RS
BCF LCD_CTRL,RW
BSF LCD_CTRL,EN
CALL SDELAY
BCF LCD_CTRL,EN
RETURN
SDELAY
CLRF T0CON
MOVLW 0FF
MOVWF TMR0H
MOVLW 0FC
MOVWF TMR0L
BCF INTCON,TMR0IF
BSF T0CON,TMR0ON
CHECK1
BTFSS INTCON,TMR0IF
BRA CHECK1
BCF T0CON,TMR0ON
RETURN
LDELAY
CLRF T0CON
MOVLW 0FF
MOVWF TMR0H
MOVLW 0C5
MOVWF TMR0L
BCF INTCON,TMR0IF
BSF T0CON,TMR0ON
CHECK0
BTFSS INTCON,TMR0IF
BRA CHECK0
BCF T0CON,TMR0ON
RETURN
DELAY
CLRF T0CON
MOVLW 0FF
MOVWF TMR0H
MOVLW 0AF
MOVWF TMR0L
BCF INTCON,TMR0IF
BSF T0CON,TMR0ON
CHECK
BTFSS INTCON,TMR0IF
BRA CHECK
BCF T0CON,TMR0ON
RETURN 


DSPOFF

MOVLW 0C
CALL COMNWRT
CALL DELAY

RETURN

READY
SETF TRISD
BCF LCD_CTRL,RS
BSF LCD_CTRL, RW
BACK
BSF LCD_CTRL,EN
CALL SDELAY
BCF LCD_CTRL,EN
BTFSC LCD_DATA,7
GOTO BACK
CLRF TRISD
RETURN



TIM
MOVLW 06H
MOVWF T0CON
MOVLW 0A3
MOVWF TMR0H
MOVLW 86
MOVWF TMR0L
BCF INTCON,TMR0IF
BSF T0CON,TMR0ON
CHECK3
BTFSS INTCON,TMR0IF
BRA CHECK3
BCF T0CON,TMR0ON
RETURN

END
